<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fang den Kreis</title>
  <!-- Google Font Fredoka One -->
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<!-- Stats-Modal -->
<div id="stats-modal" class="modal" style="display:none;">
  <div class="modal-panel">
    <button class="modal-close" aria-label="SchlieÃŸen">Ã—</button>

    <div class="tabs">
      <button class="tab-btn active" data-tab="now">Jetzt</button>
      <button class="tab-btn" data-tab="history">Historie</button>
    </div>

    <div class="tab-content" id="stats-tab-now">
      <div class="stat-row"><span>Letzter Modus</span><strong id="s-last-mode">â€“</strong></div>
      <div class="stat-row"><span>Punkte</span><strong id="s-score">0</strong></div>
      <div class="stat-row"><span>Trefferquote</span><strong id="s-acc">0%</strong></div>
      <div class="stat-row"><span>Ã˜ Reaktionszeit</span><strong id="s-avg">0 s</strong></div>
      <div class="stat-row"><span>Median RT</span><strong id="s-med">0 s</strong></div>
      <div class="stat-row"><span>Best-Streak</span><strong id="s-beststreak">0</strong></div>
      <div class="stat-row"><span>Hits/Minute</span><strong id="s-hpm">0</strong></div>
      <div class="stat-row"><span>Spielzeit (Run)</span><strong id="s-duration">0 s</strong></div>
      <div class="stat-row"><span>Spielzeit heute</span><strong id="s-today">0 s</strong></div>
      <div class="stat-row"><span>7 Tage gesamt</span><strong id="s-7d">0 s</strong></div>
    </div>

    <div class="tab-content" id="stats-tab-history" style="display:none;">
      <div class="best-grid">
        <div><small>Highscore (global)</small><strong id="b-bestscore">0</strong></div>
        <div><small>LÃ¤ngste Session</small><strong id="b-longest">0 s</strong></div>
        <div><small>Bester Ã˜-RT</small><strong id="b-avg">â€“</strong></div>
        <div><small>Beste Quote</small><strong id="b-acc">â€“</strong></div>
        <div><small>Beste HPM</small><strong id="b-hpm">â€“</strong></div>
        <div><small>Tages-Streak</small><strong id="b-streak">0</strong></div>
      </div>

      <h4>Letzte 5 Runden</h4>
      <table class="stats-table" id="runs-table">
        <thead><tr><th>Datum</th><th>Modus</th><th>Score</th><th>Ã˜RT</th><th>Quote</th><th>Dauer</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>


<body>

  <!-- Info / Einleitung -->
  <div id="info-screen">
    <h1>ğŸ”¥ Finger-Fieber bei â€Fang den Kreisâ€œ! ğŸ”¥</h1>
    <p>Bist du bereit, deine Reflexe auf die Probe zu stellen? In â€Fang den Kreisâ€œ gehtâ€™s darum, so schnell wie mÃ¶glich auf die bunten Kreise zu tippen. Je schneller du bist und je seltener du danebenklickst, desto hÃ¶her klettert dein Punktestand!</p>
    <p>WÃ¤hle zwischen drei Schwierigkeitsgraden oder trainiere deine Skills im Trainingsmodus.</p>
    <p>Und keine Sorge: Dein Name bleibt anonym â€“ nimm lieber einen coolen Nickname wie â€BlitzFingerâ€œ oder â€KreisjÃ¤gerâ€œ!</p>
    <p class="ps">PS: Ich Ã¼bernehme keine Verantwortung fÃ¼r fliegende Finger oder abstÃ¼rzende GerÃ¤te. ğŸ˜‰</p>
    <button id="info-continue">Weiter</button>
  </div>

  <!-- Namenseingabe -->
  <div id="name-screen" style="display: none;">
    <h1>Willkommen!</h1>
    <p>Wie mÃ¶chtest du heiÃŸen?</p>
    <input type="text" id="name-input" placeholder="z. B. KlickHeld123" />
    <br />
    <small style="color: #e67e22;">
      âš ï¸ Bitte gib keinen echten Namen ein (z. B. â€Max Mustermannâ€œ).<br />
      Nimm lieber einen Fantasienamen wie â€Klick-KÃ¶nigâ€œ oder â€ReaktionsHeld123â€œ!
    </small>
    <br /><br />
    <button id="name-submit">Spiel starten</button>
  </div>

  <!-- Start-Screen -->
  <div id="start-screen" style="display: none;">
    <div class="decor-wrapper">
      <span class="decor-circle" style="--top: 60px;  --left: 50px;  --color: #e74c3c;"></span>
      <span class="decor-circle" style="--top: 140px; --left: 30px;  --color: #f1c40f;"></span>
      <span class="decor-circle" style="--top: 140px; --left: 260px; --color: #2ecc71;"></span>
      <span class="decor-circle" style="--top: 200px; --left: 90px;  --color: #3498db;"></span>
      <span class="decor-circle" style="--top: 200px; --left: 220px; --color: #9b59b6;"></span>
    </div>

    <div class="header">
      <h1>Fang den Kreis!</h1>
      <div class="mode-buttons">
        <div>
          <button id="btn-visual">Visuelles Training (Speed-Modi)</button>
        </div>
        <div>
          <button id="btn-audio">Sound Challenge (HÃ¶r-Reaktion)</button>
        </div>
        <!-- NEU: Dritter Modus-Button -->
        <div>
          <button id="btn-grid">Richtungs-Training (3Ã—3 Grid)</button>
        </div>
      </div>
    </div>

    <!-- Visuelles Modal -->
    <div id="visual-modal" class="modal-overlay" style="display:none;">
      <div class="modal-content">
        <button class="modal-close">&times;</button>
        <h2>Visuelles Training (Speed-Modi)</h2>
        <div class="button-row">
          <button id="btn-easy">Leicht ğŸ”´</button>
          <button id="btn-medium">Mittel ğŸ”´</button>
          <button id="btn-hard">Schwer ğŸ”´</button>
          <button id="btn-training">Trainingsmodus ğŸ”´</button>
        </div>
        <div id="mode-highscores" style="margin-top:1rem; text-align:center;">
          <h3>Punkte in Leicht ğŸ”´, Mittel ğŸ”´, Schwer ğŸ”´</h3>
          <ul style="list-style:none; padding:0;">
            <li>Einfach ğŸ”´: <span id="hs-easy">272</span> / 333</li>
            <li>Mittel ğŸ”´: <span id="hs-medium">237</span> / 333</li>
            <li>Schwer ğŸ”´: <span id="hs-hard">86</span> / 333</li>
            <li>Gesamt: <span id="hs-total">595</span> / 999</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Audio Modal -->
    <div id="audio-modal" class="modal-overlay" style="display:none;">
      <div class="modal-content">
        <button class="modal-close">&times;</button>
        <h2>Sound Challenge (HÃ¶r-Reaktion)</h2>
        <div class="button-row">
          <button id="btn-easyaudio">Leicht ğŸ‘‚</button>
          <button id="btn-mediaudio">Mittel ğŸ§</button>
          <button id="btn-hardaudio">Schwer ğŸ¶</button>
          <button id="btn-timedtrain">Audio-Training â±ï¸</button>
        </div>
      </div>
    </div>

    <!-- NEU: Grid Modal -->
    <div id="grid-modal" class="modal-overlay" style="display:none;">
      <div class="modal-content">
        <button class="modal-close">&times;</button>
        <h2>Richtungs-Training (3Ã—3 Grid)</h2>
        <p>Tippe immer das farblich markierte Feld. Du hast 30 Sekunden.</p>
        <div class="button-row">
          <button id="btn-grid-easy">Leicht (nur linke/rechte Spalte â€“ inkl. Ecken)</button>
          <button id="btn-grid-medium">Mittel (Oben/Links/Rechts/Unten)</button>
          <button id="btn-grid-hard">Schwer (Alle 9 Felder)</button>
        </div>
      </div>
    </div>

    <!-- Neues Trainings-Intro-Modal -->
    <div id="training-info-modal" class="modal-overlay" style="display:none;">
      <div class="modal-content">
        <button class="modal-close">&times;</button>
        <h2>Trainingsmodus â€“ Kurze Anleitung</h2>

        <div class="section">
          <h3>Was du tun musst:</h3>
          <ul>
            <li>Sobald der Kreis erscheint, klicke oder tippe ihn an.</li>
            <li>Jeder Treffer gibt dir XP.</li>
          </ul>
        </div>

        <div class="section">
          <h3>Level-Up-System:</h3>
          <p>Steige auf, wenn du genug Erfahrung gesammelt hast:</p>
          <ul>
            <li>ğŸš€ <strong>Mehr Tempo:</strong> Die Challenge wird schÃ¤rfer.</li>
          </ul>
        </div>

        <label style="display:flex; align-items:center; gap:6px; margin-top:8px;">
          <input type="checkbox" id="skip-training-intro" />
          Diese Anleitung nicht mehr zeigen
        </label>

        <div style="margin-top:12px;">
          <button id="start-training-confirm">Training starten</button>
        </div>
      </div>
    </div>

  </div>

  <!-- Spielbereich -->
  <div id="game-screen" style="display: none;">
    <div id="score-box">Punkte: <span id="score">0</span></div>
    <div id="timer-box">Zeit: <span id="timer">30</span>s</div>
    <div id="streak-box">Streak: <span id="streak">0</span></div>

    <!-- Audio-Training UI -->
    <div id="audio-training-ui" style="display:none; margin-top:10px;">
      <div id="audio-training-levelDisplay">Level 0</div>
      <div id="audio-training-xpBar" style="background:#ddd; width:100%; height:12px; border-radius:6px; overflow:hidden;">
        <div id="audio-training-xpFill" style="width:0%; height:100%; background:#27ae60;"></div>
      </div>
      <div id="audio-training-xpAmount">0 XP</div>
    </div>

    <!-- Timed-Training UI -->
    <div id="timed-training-ui" style="display:none; margin-top:10px;">
      <span id="training-time">60s</span>
      <div id="train-level">Level 1</div>
      <div style="background:#ddd; width:100%; height:12px; border-radius:6px; overflow:hidden;">
        <div id="train-xp-fill" style="width:0%; height:100%; background:#27ae60;"></div>
      </div>
      <div id="train-xp-amount">0 XP</div>
    </div>

    <!-- Level & XP -->
    <div id="levelDisplay">Level 0</div>
    <div id="xpBar"><div id="xpFill"></div></div>
    <div id="xpAmount">0 XP</div>

    <button id="training-reset" style="display: none; margin:10px;">Training zurÃ¼cksetzen</button>

    <!-- Spielfeld mit Kreisen -->
    <div id="game">
      <div id="circle"></div>
      <div id="circle2" style="display: none;"></div>
      <div id="circle3" style="display: none;"></div>
      <div id="circle4" style="display: none;"></div>

      <!-- NEU: Grid-Container -->
      <div id="grid-game" style="display:none"></div>
    </div>

    <button id="back-button">ZurÃ¼ck zum Start</button>
  </div>

  <!-- Game Over Screen -->
  <div id="game-over-screen" style="display: none; text-align:center;">
    <h2>Spiel beendet!</h2>
    <p><strong>Spieler:</strong> <span id="player-name-final"></span></p>
    <p><strong>Punkte:</strong> <span id="final-score">0</span></p>
    <p><strong>Reaktionszeit (Ã˜):</strong> <span id="final-reaction">0</span> s</p>
    <p><strong>Trefferquote:</strong> <span id="final-accuracy">0%</span></p>
    <p><strong>Verpasste Klicks:</strong> <span id="final-misses">0</span></p>
    <p><strong>Bester Streak:</strong> <span id="final-persisted-best-streak">0</span></p>
    <button id="restart-button">Weiter spielen</button>
    <button id="gameover-back-button">ZurÃ¼ck zum Start</button>
  </div>

  </div>

  <!-- Hauptskript (importiert alle Module) -->
  <script type="module" src="main.js"></script>
</body>
</html>
